<!-- Totorial https://www.anychart.com/products/anymap/gallery/Maps_General_Features/World_Choropleth_Map.php
              https://playground.anychart.com/gallery/src/Maps_General_Features/World_Choropleth_Map
     -->
<!-- Ahmedn -->
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://github.com/downloads/lafeber/world-flags-sprite/flags32.css"
    />

    <style>
    .grow { transition: all .2s ease-in-out; }
.grow:hover { transform: scale(1.1); }
      #chartdiv {
        width: 100%;
        height: 700px;
        overflow: hidden;
      }
      .custom-badge {
        height: 15px;
        width: 15px;
        border-radius: 50% !important;
      }

      li {
        margin-top: 5px;
      }

      .custom-name {
        font-weight: bold;
        font-size: 13px;
        margin-right: 15px;
        margin-top: 5px;
      }
      .custom-tooltip-vector{
        width:18px;
        height:18px;
     
      }
      .custom-legend-vector{
        width:25px;
        height:25px;
     
      }

      .custom-tooltip-text{
        font-size:14px;
        color:#000;
      }
      .custom-tooltip-value{
        color:#000;
         font-size:14px;
   
      }
      .custom-center{
        display:flex!important;
        justify-content:center!important;
        align-items:center!important;
      }
      .tooltip-wrapper{
        height:200px!important;
        width:300px!important;
        border-radius:5px!important;
        margin:0px!important;
      }
      .custom-legends{
        position:absolute;
        bottom:100px;
        left:0px;
      }
     
    </style>
  </head>

  <body>
    <!-- start -->
      <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 m-0 p-0 ">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark m-0 p-0 ">
          <a class="navbar-brand" href="/">DEMO</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item ">
                <a class="nav-link" href="/">World-Choropleth-Map </a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="/highchart">World-Map<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/barchart">Bar-Chart</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  More
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">

                  <!-- <a class="dropdown-item" href="/barchart">BarChart</a>
                  <a class="dropdown-item" href="/highchart">HighChart 2</a> -->
                </div>
              </li>
            </ul>
          </div>
        </nav>
      </div>


    </div>
  </div>
    <div class="container-fluid">
      <div class="row mt-2">
      <div class="col-md-4"></div
      <div class="col-md-4">
      <p class="text-muted font-weight-bold" style="font-size:35px;">Top Global Investment in HIV Detection</p>
      </div
      <div class="col-md-4"></div>
      </div>
      <div class="row">
      <div class="col-md-1"></div>
        <div class="col-md-9  pl-2">
          <div id="chartdiv"></div>
          <div class="row">
          <div class="col-md-2 custom-legends">
       <div class="d-flex flex-row justify-content-start align-items-center mt-4" > <img src="/static/SVG/11.svg" class="custom-legend-vector"/><span class="ml-3">Public </span></div>
           <div class="d-flex flex-row justify-content-start align-items-center mt-4" > <img src="/static/SVG/22.svg" class="custom-legend-vector"/><span class="ml-3">Philonthropy </span></div>
             <div class="d-flex flex-row justify-content-start align-items-center mt-4" > <img src="/static/SVG/33.svg" class="custom-legend-vector"/><span class="ml-3">Commercial </span></div>

          </div>
          </div>
        </div>
        <div class="col-md-2" style="height: 700px">
          <div class="row h-100">
            <div
              class="col-md-12 d-flex flex-row justify-content-center align-items-center h-100"
            >
              <ul class="list-unstyled">
                <li
                  class="d-flex flex-row justify-content-end align-items-center grow mt-4"
                >
                  <span class="custom-name">Germany</span>
                  <span
                    class="badge custom-badge"
                    style="background-color: #973490"
                    >&nbsp;</span
                  >
                </li>
                <li
                  class="d-flex flex-row justify-content-end align-items-center grow mt-4"
                >
                  <span class="custom-name"> USA</span>
                  <span
                    class="badge custom-badge"
                    style="background-color: #b8428c"
                    >&nbsp;</span
                  >
                </li>
                <li
                  class="d-flex flex-row justify-content-end align-items-center grow mt-4"
                >
                  <span class="custom-name">Australia</span>
                  <span
                    class="badge custom-badge"
                    style="background-color: #db5087"
                    >&nbsp;</span
                  >
                </li>
                <li
                  class="d-flex flex-row justify-content-end align-items-center grow mt-4"
                >
                  <span class="custom-name">United Kingdom</span>
                  <span
                    class="badge custom-badge"
                    style="background-color: #e96a8d"
                    >&nbsp;</span
                  >
                </li>
                <li
                  class="d-flex flex-row justify-content-end align-items-center grow mt-4"
                >
                  <span class="custom-name"> Canada</span
                  ><span
                    class="badge custom-badge"
                    style="background-color: f3aca2"
                    >&nbsp;</span
                  >
                </li>
                <li
                  class="d-flex flex-row justify-content-end align-items-center grow mt-4"
                >
                  <span class="custom-name">India</span>
                  <span
                    class="badge custom-badge"
                    style="background-color: f9cdac"
                    >&nbsp;</span
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
      integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>

    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/maps.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/geodata/worldLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

    <!-- Chart code -->
    <script>
   am4core.ready(function() {

// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end

// Create map instance
var chart = am4core.create("chartdiv", am4maps.MapChart);

// Set map definition
chart.geodata = am4geodata_worldLow;

// Set projection
chart.projection = new am4maps.projections.Miller();

// Create map polygon series
var polygonSeries = chart.series.push(new am4maps.MapPolygonSeries());

// Exclude Antartica
polygonSeries.exclude = ["AQ"];

// Make map load polygon (like country names) data from GeoJSON
polygonSeries.useGeodata = true;

// Configure series
var polygonTemplate = polygonSeries.mapPolygons.template;
polygonTemplate.tooltipText = "{name}";
polygonTemplate.polygon.fillOpacity = 0.6;

//polygonTemplate.polygon.fill = am4core.color("#B27799");
polygonTemplate.polygon.stroke = am4core.color("#000");
polygonTemplate.polygon.strokeWidth="0";
// Create hover state and set alternative fill color
var hs = polygonTemplate.states.create("hover");
hs.properties.fill = chart.colors.getIndex(0);
chart.logo.height = -15000;
        // Add image series
        var imageSeries = chart.series.push(new am4maps.MapImageSeries());
        imageSeries.mapImages.template.propertyFields.longitude = "longitude";
        imageSeries.mapImages.template.propertyFields.latitude = "latitude";
        imageSeries.mapImages.template.tooltipText = "{title}";
        imageSeries.mapImages.template.propertyFields.url = "url";
        imageSeries.tooltip.getFillFromObject = false;
        imageSeries.tooltip.background.cornerRadius = 10
          imageSeries.tooltip.pointerOrientation = "up"

        imageSeries.tooltip.background.fill = am4core.color("#fff");
        
        imageSeries.mapImages.template.tooltipHTML = `
        <div class="bg-white p-2 m-0 tooltip-wrapper"> 
        <center><span class="font-weight-bold" style="color:{color};">Investment By Sectors </span></center>
       

        <div class="row d-flex flex-row justify-content-center align-items-center mt-2">
        <div class="col-md-4 custom-center"> <img src="{flag}" style="height:25px;width:40px;"/></div> 
        <div class="col-md-4 d-flex flex-row justify-content-start align-items-center"><span class=" custom-tooltip-text text-left font-weight-bold" >{title} </span></div>
        <div class="col-md-4 custom-center"></div>             
        </div>


        <div class="row d-flex flex-row justify-content-center align-items-center mt-3">
        <div class="col-md-4 custom-center"> <img src="/static/SVG/11.svg" class="custom-tooltip-vector"/></div> 
        <div class="col-md-4 d-flex flex-row justify-content-start align-items-center"><span class=" custom-tooltip-text text-left" >Public </span></div>
        <div class="col-md-4 custom-center"> <span  class="custom-tooltip-value" >{public}  M</span></div>             
        </div>


        <div class="row d-flex flex-row justify-content-center align-items-center mt-2">
        <div class="col-md-4 custom-center"> <img src="/static/SVG/22.svg" class="custom-tooltip-vector"/></div> 
        <div class="col-md-4 d-flex flex-row justify-content-start align-items-center"><span class=" custom-tooltip-text text-left" >Philanthropic </span></div>
        <div class="col-md-4 custom-center"> <span  class="custom-tooltip-value" >{philanthropic}  M</span></div>             
        </div>



        <div class="row d-flex flex-row justify-content-center align-items-center mt-2">
        <div class="col-md-4 custom-center"> <img src="/static/SVG/33.svg" class="custom-tooltip-vector"/></div> 
        <div class="col-md-4 d-flex flex-row justify-content-start align-items-center"><span class=" custom-tooltip-text text-left" >Commercial </span></div>
        <div class="col-md-4 custom-center"> <span  class="custom-tooltip-value" >{commercial}  M</span></div>
        </div>



         <div class="row d-flex flex-row justify-content-center align-items-center mt-2">
        <div class="col-md-4  custom-center"> </div> 
        <div class="col-md-4  custom-center"><span class=" custom-tooltip-text text-danger font-weight-bold" >Total </span></div>
        <div class="col-md-4  custom-center"> <span  class="custom-tooltip-value text-danger font-weight-bold" >{total}  M</span></div>             
        </div>            



       
         
        </div>`;
      

        var circle = imageSeries.mapImages.template.createChild(am4core.Circle);
        circle.radius = 10;
        circle.propertyFields.fill = "color";

        var circle2 = imageSeries.mapImages.template.createChild(
          am4core.Circle
        );
        circle2.radius = 6;
        circle2.propertyFields.fill = "color";

        circle2.events.on("inited", function (event) {
          animateBullet(event.target);
        });



      function animateBullet(circle) {
        var animation = circle.animate([{ property: "scale", from: 1, to: 5 }, { property: "opacity", from: 1, to: 0 }], 5000, am4core.ease.circleOut);
        animation.events.on("animationended", function(event){
          animateBullet(event.target.object);
         })
      }

        var colorSet = new am4core.ColorSet();

        imageSeries.data = [
          {
            title: "Germany",
            flag:"/static/flags/germany.png",
            latitude: 51.1657,
            longitude: 10.4515,
            color: "#973490",
            public: 350,
            philanthropic: 150,
            commercial: 250,
            total: 750,
          },
          {
            title: "USA",
              flag:"/static/flags/usa.png",
            latitude: 37.0902,
            longitude: -95.7129,
             color: "#b8428c",
            public: 350,
            philanthropic: 150,
            commercial: 250,
            total: 750,
          },
          {
            title: "Australia",
              flag:"/static/flags/australia.png",
            latitude: -25.2744,
            longitude: 133.7751,
             color: "#db5087",
            public: 350,
            philanthropic: 150,
            commercial: 250,
            total: 750,
          },
          {
            title: "United Kingdom",
              flag:"/static/flags/uk.png",
            latitude: 55.3781,
            longitude: 3.436,
             color: "#e96a8d",
            public: 350,
            philanthropic: 150,
            commercial: 250,
            total: 750,
          },
          {
            title: "Canada",
              flag:"/static/flags/canada.png",
            latitude: 56.1304,
            longitude: -106.3468,
           color: "#ee8b97",
            public: 350,
            philanthropic: 150,
            commercial: 250,
            total: 750,
          },
          {
            title: "India",
              flag:"/static/flags/india.png",
            latitude: 20.5937,
            longitude: 78.9629,
          color: "#f9cdac",
            public: 350,
            philanthropic: 150,
            commercial: 250,
            total: 750,
          },
          
        ];
      }); // end am4core.ready()
    </script>
  </body>
</html>
