<!-- Totorial https://www.anychart.com/products/anymap/gallery/Maps_General_Features/World_Choropleth_Map.php
              https://playground.anychart.com/gallery/src/Maps_General_Features/World_Choropleth_Map
     -->
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="https://github.com/downloads/lafeber/world-flags-sprite/flags32.css">

  <style type="text/css">
  html,body{
    overflow-x: hidden;

  }
    #map {
      height: 100%!important;
      width: 100%!important;
      margin: 0 auto;
     
    }

    .highcharts-tooltip>span {
      padding: 10px;
      white-space: normal !important;
      width: 200px;
    }

    .loading {
      margin-top: 10em;
      text-align: center;
      color: gray;
    }

    .f32 .flag {
      vertical-align: middle !important;
    }

    .custom-badge {
      height: 30px;
      width: 10px;
      border-radius: 0px !important;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    li {
      margin-top: 5px;
      ;
    }

    .custom-name {
      font-weight: bold;
      font-size: 12px;
      margin-left: 10px;
      margin-top: 5px;
      ;
    }

    .custom-name:hover {
      color: green;
      ;
    }
  </style>
</head>

<body>

  <!-- start -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 m-0 p-0 ">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark m-0 p-0 ">
          <a class="navbar-brand" href="/">DEMO</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item ">
                <a class="nav-link" href="/">World-Choropleth-Map </a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="/highchart">World-Map<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/barchart">Bar-Chart</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  More
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">

                  <!-- <a class="dropdown-item" href="/barchart">BarChart</a>
                  <a class="dropdown-item" href="/highchart">HighChart 2</a> -->
                </div>
              </li>
            </ul>
          </div>
        </nav>
      </div>


    </div>
  </div>
  <div class="container-fluid">
  <div class="row">
    <div class="col-md-10 border">
      <div id="map"></div>
    </div>
    <div class="col-md-2 border">

      <div class="row d-flex flex-row justify-content-center align-items-center" style="height:700px;">
        <div class="col-md-12">
          <ul class="list-unstyled ">
            <li class="d-flex flex-row justify-content-start align-items-center mt-1"> <span class="badge"><img
                  src="/static/SVG/11.svg" class="img-fluid"
                  style="height:25px;width:30px;" /></span><span class="ml-3 font-weight-bold">Public</span></li>
            <li class="d-flex flex-row justify-content-start align-items-center mt-1"> <span class="badge"><img
                  src="/static/SVG/22.svg" class="img-fluid"
                  style="height:25px;width:30px;" /></span><span class="ml-3 font-weight-bold">Philanthropic</span></li>

            <li class="d-flex flex-row justify-content-start align-items-center mt-1"> <span class="badge"><img
                  src="/static/SVG/33.svg" class="img-fluid"
                  style="height:25px;width:30px;" /></span><span class="ml-3 font-weight-bold">Commercial</span></li>


          </ul>
        </div>
        <div class="col-md-12 ml-2">
          <ul class="list-unstyled ">
            <li class="d-flex flex-row"> <span class="badge custom-badge"
                style="background-color:#6279c5;">&nbsp;</span><span class="custom-name">North America</span></li>
            <li class="d-flex flex-row"> <span class="badge  custom-badge"
                style="background-color:#37cc9a;">&nbsp;</span><span class="custom-name">Latin America & the
                Caribbean</span></li>
            <li class="d-flex flex-row"> <span class="badge custom-badge"
                style="background-color:#95004f;">&nbsp;</span><span class="custom-name">Europe</span></li>
            <li class="d-flex flex-row"> <span class="badge  custom-badge"
                style="background-color:b37faf;">&nbsp;</span><span class="custom-name">Africa</span></li>
            <li class="d-flex flex-row"> <span class="badge custom-badge "
                style="background-color:b4de00;">&nbsp;</span><span class="custom-name">East,South & Southren
                Asia</span></li>
            <li class="d-flex flex-row"> <span class="badge  custom-badge"
                style="background-color:#f57b0d">&nbsp;</span><span class="custom-name">Oceania</span></li>

          </ul>
        </div>
      </div>

    </div>

  </div>
</div>


  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"></script>
  <script src="https://code.highcharts.com/maps/highmaps.js"></script>

  <script src="https://code.highcharts.com/maps/modules/data.js"></script>
  <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/maps/modules/offline-exporting.js"></script>
  <script src="https://code.highcharts.com/mapdata/custom/world.js"></script>

  <!-- Flag sprites service provided by Martijn Lafeber, https://github.com/lafeber/world-flags-sprite/blob/master/LICENSE -->



  <script>

    Highcharts.getJSON('/api2', function (data) {
      const jsonLength = data.length
      // Prevent logarithmic errors in color calulcation
      data.forEach(function (p) {
        console.log(p.total)
        p.total = (p.total < 1 ? 1 : p.total);
      });

      // Initiate the chart
      Highcharts.mapChart('map', {

        chart: {
          map: 'custom/world',

        },

        title: {
          text: ' Figure 15 --  Top Global Investment in HIV Detection ',
          style: {
            color: '#000',
            backgroundColor: '',
            fontSize: "30",
            fontWeight: '700',

          }
        },

        legend: {
          title: {
            text: 'Global Investment',
            style: {
              color: ( // theme
                Highcharts.defaultOptions &&
                Highcharts.defaultOptions.legend &&
                Highcharts.defaultOptions.legend.title &&
                Highcharts.defaultOptions.legend.title.style &&
                Highcharts.defaultOptions.legend.title.style.color
              ) || 'black'
            }
          }
        },

        mapNavigation: {
          enabled: true,
          buttonOptions: {
            verticalAlign: 'bottom'
          }
        },

        tooltip: {
          backgroundColor: 'none',
          borderWidth: 0,
          shadow: false,
          useHTML: true,
          padding: 0,
          pointFormat: '<span class="f32"><span class="flag {point.properties.hc-key}">' +
            '</span></span> <span style="color:{point.color};font-weight:bold;font-size:18px;">{point.name}</span><br>' +
            '<img src="/static/SVG/11.svg" style="width:25px;height:25px;margin-right:3px;margin-top:5px;"/><span style="font-size:15px"><span class="font-weight-bold" style="color:#000;margin-top:5px;" >Public :</span> <span style="color:#000;font-weight:bold;">{point.public}  M</span></span><br>' +
            '<img src="/static/SVG/22.svg" style="width:25px;height:25px;margin-right:3px;margin-top:5px;"/><span style="font-size:15px"><span class="font-weight-bold" style="color:#000;margin-top:5px;" >philanthropic :</span>  <span style="color:#000;;font-weight:bold;">{point.philanthropic} M</span></span><br>' +
            '<img src="/static/SVG/33.svg" style="width:25px;height:25px;margin-right:3px;margin-top:5px;"/><span style="font-size:15px"><span class="font-weight-bold" style="color:#000;margin-top:5px;">Commercial :</span> <span style="color:#000;;font-weight:bold;">{point.commercial} M</span></span><br>' +
            '<img src="https://www.flaticon.com/premium-icon/icons/svg/2697/2697325.svg" style="width:25px;height:25px;margin-right:3px;margin-top:5px;"/><span style="font-size:15px"><span class="font-weight-bold" style="color:#000;margin-top:5px;">Total :</span>  <span style="color:#000;;font-weight:bold;">{point.total} M</span></span><br>',
          positioner: function () {
            return { x: 100, y: 450 };
          }
        },


        colorAxis: {
          min: 1,
          max: 1000,
          type: 'logarithmic'
        },

        series: [{
          data: data,
          joinBy: ['iso-a3', 'code3'],
          name: 'Investment By Sectors',
          states: {
            hover: {
              color: '#a4edba'
            }
          }, dataLabels: {
            enabled: true,
            format: '{point.country}'
          }
        }]
      });
    });

  </script>
</body>

</html>


<!-- json data -->
<!-- https://cdn.jsdelivr.net/gh/highcharts/highcharts@v7.0.0/samples/data/world-population-density.json -->
<!-- https://www.highcharts.com/demo/maps/tooltip -->