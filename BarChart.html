<!-- Totorial https://www.anychart.com/products/anymap/gallery/Maps_General_Features/World_Choropleth_Map.php
              https://playground.anychart.com/gallery/src/Maps_General_Features/World_Choropleth_Map
     -->
<html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-ui.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-exports.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-map.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-data-adapter.min.js"></script>
    <script src="https://cdn.anychart.com/geodata/2.0.0/custom/world/world.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.15/proj4.js"></script>
    <link href="https://cdn.anychart.com/releases/v8/css/anychart-ui.min.css" type="text/css" rel="stylesheet">
    <link href="https://cdn.anychart.com/releases/v8/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet">
    <style type="text/css">
        html,
        body,
        #container {
            width: 100%;
            height: 500px;
            margin: 0;
            padding: 0;
        }

        .serif {
            font-family: "Times New Roman", Times, serif;
        }

        .sansserif {
            font-family: Arial, Helvetica, sans-serif;
        }

        .monospace {
            font-family: "Lucida Console", Courier, monospace;
        }
    </style>
</head>

<body>

    <!-- start -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 m-0 p-0 ">
                <nav class="navbar navbar-expand-lg navbar-dark bg-dark m-0 p-0 ">
                    <a class="navbar-brand" href="/">DEMO</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown">
                        <ul class="navbar-nav">
                            <li class="nav-item ">
                                <a class="nav-link" href="/">World-Choropleth-Map </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/highchart">HighChart </a>
                            </li>
                            <li class="nav-item active">
                                <a class="nav-link" href="/barchart">Bar-Chart <span
                                        class="sr-only">(current)</span></a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    More
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <a class="dropdown-item" href="/barchart">BarChart</a>
                                    <a class="dropdown-item" href="/highchart">HighChart 2</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>


        </div>
    </div>



    <div class="container">
        <div class="row">
            <div class="col-md-12 border">
                <div id="container"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 ">
                <div class="row border">
                    <div class="col-md-12 d-flex flex-column justify-content-center align-items-center bg-dark">
                        <p class="text-success font-weight-bold " style="font-size:25px;letter-spacing:2px;">PUBLIC
                        </p><span class="numYear text-white font-weight-bold" style="font-size:14px;">(2018)</span>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-success font-weight-bold mt-2" style="font-size:45px;transform: scale(1.2, 1.7);"
                            id="numPublic">
                            11624</p>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-success font-weight-bold" style="font-size:18px;">US$ MILLION</p>
                    </div>
                </div>


            </div>


            <div class="col-md-3 ">
                <div class="row border">
                    <div class="col-md-12 d-flex flex-column justify-content-center align-items-center bg-dark">
                        <p class="text-danger font-weight-bold " style="font-size:25px;letter-spacing:2px;">
                            COMMERCIAL</p>
                        <span class="numYear text-white font-weight-bold" style="font-size:14px;">(2018)</span>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-danger font-weight-bold mt-2" style="font-size:45px;transform: scale(1.2, 1.7);"
                            id="numCommercial">65000
                        </p>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-danger font-weight-bold" style="font-size:18px;">US$ MILLION</p>
                    </div>
                </div>


            </div>


            <div class="col-md-3 ">
                <div class="row border">
                    <div class="col-md-12 d-flex flex-column justify-content-center align-items-center bg-dark">
                        <p class="text-white font-weight-bold " style="font-size:25px;letter-spacing:2px;">
                            PHILANTHROPIC</p><span class="numYear text-white font-weight-bold"
                            style="font-size:14px;">(2018)</span>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-primary font-weight-bold mt-2" style="font-size:45px;transform: scale(1.2, 1.7);"
                            id="num">20000
                        </p>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-primary font-weight-bold" style="font-size:18px;">US$ MILLION</p>
                    </div>
                </div>


            </div>


            <div class="col-md-3 ">
                <div class="row border">
                    <div class="col-md-12 d-flex flex-column justify-content-center align-items-center bg-dark">
                        <p class="text-warning font-weight-bold " style="font-size:25px;letter-spacing:2px;">TOTAL
                        </p>
                        <span class="numYear text-white font-weight-bold" style="font-size:14px;">(2018)</span>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-warning font-weight-bold mt-2" style="font-size:45px;transform: scale(1.2, 1.7);"
                            id="numTotal">
                            108624</p>
                    </div>
                    <div class="col-md-12 d-flex flex-row justify-content-center align-items-center">
                        <p class="text-warning font-weight-bold" style="font-size:18px;">US$ MILLION</p>
                    </div>
                </div>


            </div>



        </div>

        <div class="row">
            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center">

                <img src="https://www.flaticon.com/svg/static/icons/svg/2934/2934700.svg" class="img-fluid"
                    style="height: 80px;;width:100px;;" />
            </div>


            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center">
                <img src="https://www.flaticon.com/svg/static/icons/svg/891/891419.svg" class="img-fluid"
                    style="height: 80px;;width:100px;;" />
            </div>


            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center">
                <img src="https://www.flaticon.com/svg/static/icons/svg/3533/3533270.svg" class="img-fluid"
                    style="height: 80px;;width:100px;;" />
            </div>


            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center">
                <img src="https://www.flaticon.com/premium-icon/icons/svg/2244/2244556.svg" class="img-fluid"
                    style="height: 80px;;width:100px;;" />
            </div>



        </div>


        <div class="row">
            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center pt-3">
                <p class="font-weight-bold text-muted">PREVENTIVE VACCINES</p>

            </div>


            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center pt-3">
                <p class="font-weight-bold text-muted">PREVENTIVE VACCINES</p>
            </div>


            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center pt-3">
                <p class="font-weight-bold text-muted">PREVENTIVE VACCINES</p>
            </div>


            <div class="col-md-3 d-flex flex-row justify-content-center align-items-center pt-3">
                <p class="font-weight-bold text-muted">PREVENTIVE VACCINES</p>
            </div>



        </div>




    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
    <script>
        anychart.onDocumentReady(function () {
            // create data set on our data
            var dataSet = anychart.data.set([
                ['2001', 11861, 20000, 80000, 160000],
                ['2002', 11261, 30000, 60000, 150000],
                ['2003', 22998, 40000, 70000, 130000],
                ['2004', 10342, 50000, 9000, 140000],
                ['2005', 12321, 30000, 90000, 190000],
                ['2006', 12998, 20000, 75000, 160000],
                ['2007', 8814, 10000, 45000, 150000],
                ['2008', 11624, 30000, 66000, 190000],
                ['2009', 13012, 60000, 44000, 120000],
                ['2010', 12814, 70000, 95000, 130000]
                ['2011', 11861, 50000, 56000, 180000],
                ['2012', 11261, 30000, 34000, 110000],
                ['2013', 22998, 20000, 76000, 140000],
                ['2014', 10342, 30000, 55000, 170000],
                ['2015', 12321, 40000, 87000, 130000],
                ['2016', 12998, 50000, 96000, 120000],
                ['2017', 8814, 10000, 45000, 150000],
                ['2018', 11624, 20000, 65000, 108624],
                ['2019', 13012, 30000, 34000, 130000],
                ['2020', 12814, 50000, 87000, 150000]
            ]);

            // map data for the first series, take x from the zero column and value from the first column of data set
            var seriesData_1 = dataSet.mapAs({ 'x': 0, 'value': 1, });

            // map data for the second series, take x from the zero column and value from the second column of data set
            var seriesData_2 = dataSet.mapAs({ 'x': 0, 'value': 2 });

            // map data for the third series, take x from the zero column and value from the third column of data set
            var seriesData_3 = dataSet.mapAs({ 'x': 0, 'value': 3 });

            // map data for the fourth series, take x from the zero column and value from the fourth column of data set
            var seriesData_4 = dataSet.mapAs({ 'x': 0, 'value': 4 });

            // create bar chart
            var chart = anychart.column();

            // turn on chart animation
            chart.animation(true);

            // set container id for the chart
            chart.container('container');
            chart.padding([10, 40, 5, 20]);

            // set scale minimum
            chart.yScale().minimum(0);

            // force chart to stack values by Y scale.
            chart.yScale().stackMode('value');

            chart.yAxis().labels().format(function () {
                return "$" + this.value.toLocaleString();
            });
            //Style X Axis 
            var labels = chart.xAxis().labels();
            labels.fontFamily("Courier");
            labels.fontSize(12);
            labels.fontColor("red");
            labels.fontWeight("bold");
            labels.useHtml(false);
            var xLabelsBackground = chart.xAxis().labels().background();
            xLabelsBackground.enabled(true);
            xLabelsBackground.stroke("#cecece");
            xLabelsBackground.cornerType("round");
            xLabelsBackground.corners(5);

            //End Style X Axis 


            //Style yAxis 
            // wait until chart is displayed
            chart.listen('chartDraw', function () {
                // get a number of labels on the Y axis
                var count = chart.yAxis().labels().getLabelsCount();
                // go to through all labels
                for (var i = 0; i < count; i++) {
                    // get label object
                    var label = chart.yAxis().labels().getLabel(i);
                    // get value of the scale this label
                    value = chart.yAxis().scale().ticks().get()[i];
                    // get chart average
                    avg = chart.getSeries(0).getStat('average');
                    // if the value is greater
                    if (value > avg) {
                        label.fontColor("red");
                        label.background().enabled(true).stroke("black");
                        label.draw();
                    }
                }
            });
            //End Style Y Axis 
            // set titles for axises
            chart.xAxis().title('Years');
            chart.yAxis().title('Investment in Millions');

            // helper function to setup label settings for all series
            var setupSeriesLabels = function (series, name) {
                series.name(name);
                series.tooltip().valuePrefix('$');
                series.stroke('3 #fff 1');
                // series.hovered().stroke('3 #fff 1');
            };

            // temp variable to store series instance
            var series1;
            var series2;
            var series3;
            var series4;

            // create first series with mapped data
            series1 = chart.column(seriesData_1);
            series1.normal().fill("#F3D803", 0.9);
            series1.hovered().fill("#F3D803", 0.1);
            series1.selected().fill("#F3D803", 0.5);
            series1.normal().stroke("#F3D803", 1, "10 5", "round");
            series1.hovered().stroke("#F3D803", 2, "10 5", "round");
            series1.selected().stroke("#F3D803", 4, "10 5", "round");
            setupSeriesLabels(series1, 'Public');

            // create second series with mapped data
            series2 = chart.column(seriesData_2);
            series2.normal().fill("#6EA8F2", 0.9);
            series2.hovered().fill("#6EA8F2", 0.1);
            series2.selected().fill("#6EA8F2", 0.5);
            series2.normal().stroke("#6EA8F2", 1, "10 5", "round");
            series2.hovered().stroke("#6EA8F2", 2, "10 5", "round");
            series2.selected().stroke("#6EA8F2", 4, "10 5", "round");
            setupSeriesLabels(series2, 'Philanthropic');

            // create third series with mapped data
            series3 = chart.column(seriesData_3);
            series3.normal().fill("#F22020", 0.9);
            series3.hovered().fill("#F22020", 0.1);
            series3.selected().fill("#F22020", 0.5);
            series3.normal().stroke("#F22020", 1, "10 5", "round");
            series3.hovered().stroke("#F22020", 2, "10 5", "round");
            series3.selected().stroke("#F22020", 4, "10 5", "round");
            setupSeriesLabels(series3, 'Commercial');

            // create fourth series with mapped data
            series4 = chart.column(seriesData_4);
            series4.normal().fill("#3F5E1C", 0.9);
            series4.hovered().fill("#3F5E1C", 0.1);
            series4.selected().fill("#3F5E1C", 0.5);
            series4.normal().stroke("#3F5E1C", 1, "10 5", "round");
            series4.hovered().stroke("#3F5E1C", 2, "10 5", "round");
            series4.selected().stroke("#3F5E1C", 4, "10 5", "round");
            setupSeriesLabels(series4, 'Total');

            // turn on legend
            chart.legend().enabled(true).fontSize(13).padding([0, 0, 20, 0]);
            chart.interactivity().hoverMode('by-x');
            chart.tooltip().displayMode('union');
            // initiate chart drawing
            chart.draw();
            // add a listener
            chart.listen("pointClick", function (e) {
                var index = e.iterator.getIndex();
                var row = dataSet.row(index);
                if (row.fillOld) {
                    row.fill = row.fillOld; delete row.fillOld;
                } else {
                    row.fillOld = row.fill; row.fill = "green";
                }
                console.log(index)
                console.log("year" + row[0])
                console.log("public" + row[1])
                console.log("philan" + row[2])
                console.log("commercial" + row[3])
                console.log("total" + row[4])
                $('#num').html(row[2])
                $('#numPublic').html(row[1])
                $('#numCommercial').html(row[3])
                $('#numTotal').html(row[4])
                $('.numYear').html("(" + row[0] + ")")



                //   dataSet.row(index, row);
            });
        });
    </script>
</body>

</html>