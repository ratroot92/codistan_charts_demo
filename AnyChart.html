<!-- Totorial https://www.anychart.com/products/anymap/gallery/Maps_General_Features/World_Choropleth_Map.php
              https://playground.anychart.com/gallery/src/Maps_General_Features/World_Choropleth_Map
     -->
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-ui.min.js"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-exports.min.js"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-map.min.js"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-data-adapter.min.js"></script>
  <script src="https://cdn.anychart.com/geodata/2.0.0/custom/world/world.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.15/proj4.js"></script>
  <link href="https://cdn.anychart.com/releases/v8/css/anychart-ui.min.css" type="text/css" rel="stylesheet">
  <link href="https://cdn.anychart.com/releases/v8/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet">
  <style type="text/css">
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>

<body>

  <!-- start -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 m-0 p-0 ">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark m-0 p-0 ">
          <a class="navbar-brand" href="/">DEMO</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item active">
                <a class="nav-link" href="/">World-Choropleth-Map <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/highchart">World-Map</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/barchart">BarChart</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  More
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <!-- <a class="dropdown-item" href="/barchart">BarChart</a>
                            <a class="dropdown-item" href="/highchart">HighChart 2</a> -->
                </div>
              </li>
            </ul>
          </div>
        </nav>
      </div>


    </div>
  </div>

  <div class="col-md-12 border">
    <div id="container"></div>
  </div>


  <script>


    anychart.onDocumentReady(function () {
      // The data used in this sample can be obtained from the CDN
      // https://cdn.anychart.com/samples/maps-general-features/world-choropleth-map/data.json
      anychart.data.loadJsonFile('/api',

        function (data) {
          var map = anychart.map();

          map
            .credits()
            .enabled(true)
            .url(
              'https://en.wikipedia.org/wiki/List_of_sovereign_states_and_dependent_territories_by_population_density'
            )
            .logoSrc('https://en.wikipedia.org/static/favicon/wikipedia.ico')
            .text(
              'Data source: https://en.wikipedia.org/wiki/List_of_sovereign_states_and_dependent_territories_by_population_density'
            );

          map
            .title()
            .enabled(true)
            .useHtml(true)
            .padding([10, 0, 10, 0])
            .text(
              '<span style="color:green;;font-weight:700;font-size:25px;">Top Global Investment in HIV Detection <br/>' +
              '<span  style="color:#929292; font-size: 12px;font-weight:bold;">(Data source: WHO, 2015)</span>'
            )
          map.geoData('anychart.maps.world');
          map.interactivity().selectionMode('none');
          map.padding(0);

          var dataSet = anychart.data.set(data);
          // console.log(dataSet)
          //#######################################################################################
          //                                PUBLIC SERIES 
          //######################################################################################
          // var publicData = dataSet.mapAs({ value: 'public' });
          // var publicSeries = map.choropleth(publicData);
          // publicSeries.name("Public")
          // publicSeries.labels(false);//shows country names 
          // publicSeries
          //   .hovered()
          //   .fill('#f48fb1')
          //   .stroke(anychart.color.darken('#f48fb1'));

          // publicSeries
          //   .selected()
          //   .fill('#c2185b')
          //   .stroke(anychart.color.darken('#c2185b'));

          // publicSeries
          //   .tooltip()
          //   .useHtml(true)
          //   .format(function () {
          //     return (
          //       '<span class="font-weight-bold;"style="color: #d9d9d9">Public</span>: ' +
          //       // parseFloat(this.value).toLocaleString() +
          //       parseFloat(this.value).toLocaleString() + 'M')
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:green;font-size:12px;"></i> <br/>' +
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Commercial</span>: ' +
          //     //   parseFloat(this.getData('commercial')).toLocaleString() +'M'+
          //     //   '  <i class="fa fa-users" aria-hidden="true"style="color:red;font-size:12px;"></i><br/>' +
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Public</span>: ' +
          //     //   parseFloat(this.getData('public')).toLocaleString()+'M'+
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:yellow;font-size:12px;"></i> <br/> '+
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Total</span>: ' +
          //     //   parseFloat(this.getData('total')).toLocaleString()+'M'+
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:white;font-size:12px;"></i> <br/> '

          //     // );
          //   });




          //#######################################################################################
          //                                COMEMRCIAL SERIES 
          //######################################################################################
          // var commercialData = dataSet.mapAs({ value: 'commercial' });
          // var commercialSeries = map.choropleth(commercialData);
          // commercialSeries.name("Commercial")
          // commercialSeries
          //   .hovered()
          //   .fill('#f48fb1')
          //   .stroke(anychart.color.darken('#f48fb1'));

          // commercialSeries
          //   .selected()
          //   .fill('#c2185b')
          //   .stroke(anychart.color.darken('#c2185b'));

          // commercialSeries
          //   .tooltip()
          //   .useHtml(true)
          //   .format(function () {
          //     return (
          //       '<span class="font-weight-bold;"style="color: #d9d9d9">Commercial</span>: ' +
          //       // parseFloat(this.value).toLocaleString() +
          //       parseFloat(this.value).toLocaleString() + 'M')
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:green;font-size:12px;"></i> <br/>' +
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Commercial</span>: ' +
          //     //   parseFloat(this.getData('commercial')).toLocaleString() +'M'+
          //     //   '  <i class="fa fa-users" aria-hidden="true"style="color:red;font-size:12px;"></i><br/>' +
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Public</span>: ' +
          //     //   parseFloat(this.getData('public')).toLocaleString()+'M'+
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:yellow;font-size:12px;"></i> <br/> '+
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Total</span>: ' +
          //     //   parseFloat(this.getData('total')).toLocaleString()+'M'+
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:white;font-size:12px;"></i> <br/> '

          //     // );
          //   });
          //#######################################################################################
          //                                PHILATHRIOC SERIES 
          //######################################################################################
          // var philanthropicData = dataSet.mapAs({ value: 'philanthropic' });
          // var philanthropicSeries = map.choropleth(philanthropicData);
          // philanthropicSeries.name("Philanthropic")
          // philanthropicSeries
          //   .hovered()
          //   .fill('#f48fb1')
          //   .stroke(anychart.color.darken('#f48fb1'));

          // philanthropicSeries
          //   .selected()
          //   .fill('#c2185b')
          //   .stroke(anychart.color.darken('#c2185b'));

          // philanthropicSeries
          //   .tooltip()
          //   .useHtml(true)
          //   .format(function () {
          //     return (
          //       '<span class="font-weight-bold;"style="color: #d9d9d9">philanthropic</span>: ' +
          //       // parseFloat(this.value).toLocaleString() +
          //       parseFloat(this.value).toLocaleString() + 'M')
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:green;font-size:12px;"></i> <br/>' +
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Commercial</span>: ' +
          //     //   parseFloat(this.getData('commercial')).toLocaleString() +'M'+
          //     //   '  <i class="fa fa-users" aria-hidden="true"style="color:red;font-size:12px;"></i><br/>' +
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Public</span>: ' +
          //     //   parseFloat(this.getData('public')).toLocaleString()+'M'+
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:yellow;font-size:12px;"></i> <br/> '+
          //     //   '<span class="font-weight-bold;"style="color: #d9d9d9">Total</span>: ' +
          //     //   parseFloat(this.getData('total')).toLocaleString()+'M'+
          //     //   ' <i class="fa fa-users" aria-hidden="true"style="color:white;font-size:12px;"></i> <br/> '

          //     // );
          //   });
          // var philanthropicScale = anychart.scales.ordinalColor([
          //   { less: 10 },
          //   { from: 10, to: 30 },
          //   { from: 30, to: 50 },
          //   { from: 50, to: 100 },
          //   { from: 100, to: 200 },
          //   { from: 200, to: 300 },
          //   { from: 300, to: 500 },
          //   { from: 500, to: 1000 },
          //   { greater: 1000 }
          // ]);

          // philanthropicScale.colors([
          //   '#81d4fa',
          //   '#4fc3f7',
          //   '#29b6f6',
          //   '#039be5',
          //   '#0288d1',
          //   '#0277bd',
          //   '#01579b',
          //   '#014377',
          //   '#000000'
          // ]);


          // var philanthropicColorRange = map.colorRange();
          // philanthropicColorRange.enabled(true).padding([0, 0, 20, 0]);
          // philanthropicColorRange
          //   .ticks()
          //   .enabled(true)
          //   .stroke('3 #ffffff')
          //   .position('right')
          //   .length(7);
          // philanthropicColorRange.colorLineSize(5);
          // philanthropicColorRange.marker().size(7);
          // philanthropicColorRange
          //   .labels()
          //   .fontSize(11)
          //   .padding(3, 0, 0, 0)
          //   .format(function () {
          //     var range = this.philanthropicColorRange;
          //     var name;
          //     if (Number.isFinite(range.start + range.end)) {
          //       name = range.start + ' - ' + range.end;
          //     } else if (Number.isFinite(range.start)) {
          //       name = 'More than ' + range.start;
          //     } else {
          //       name = 'Less than ' + range.end;
          //     }
          //     return name;
          //   });

          // philanthropicSeries.colorScale(philanthropicScale);




          //#######################################################################################
          //                                TOATL SERIES 
          //######################################################################################

          var totalData = dataSet.mapAs({ value: 'total' });
          var totalSeries = map.choropleth(totalData);
          totalSeries.name("Total")

          // totalSeries.labels(true);//shows country names 
          totalSeries
            .hovered()
            .fill('green')
            .stroke(anychart.color.darken('green'));

          totalSeries
            .selected()
            .fill('red')
            .stroke(anychart.color.darken('#c2185b'));

          totalSeries
            .tooltip()
            .useHtml(true)
            .format(function () {
              return (
                '<span class="font-weight-bold;"style="color: #fff;font-weight:bold;">Philanthropic : ' +
                // parseFloat(this.value).toLocaleString() +
                parseFloat(this.value).toLocaleString() + 'M' +
                ' <i class="fa fa-users" aria-hidden="true"style="color:yellow;font-size:12px;"></i> <br/>' +
                '<span class="font-weight-bold;"style="color: #fff;font-weight:bold;">Commercial</span>: ' +
                parseFloat(this.getData('commercial')).toLocaleString() + 'M' +
                '  <i class="fa fa-users" aria-hidden="true"style="color:yellow;font-size:12px;"></i><br/>' +
                '<span class="font-weight-bold;"style="color: #fff;font-weight:bold;">Public</span>: ' +
                parseFloat(this.getData('public')).toLocaleString() + 'M' +
                ' <i class="fa fa-users" aria-hidden="true"style="color:yellow;font-size:12px;"></i> <br/> ' +
                '<span class="font-weight-bold;"style="color: #fff;font-weight:bold;">Total</span>: ' +
                parseFloat(this.getData('total')).toLocaleString() + 'M' +
                ' <i class="fa fa-users" aria-hidden="true"style="color:yellow;font-size:12px;"></i> <br/> '

              );
            });

          var totalScale = anychart.scales.ordinalColor([
            { less: 10 },
            { from: 10, to: 30 },
            { from: 30, to: 50 },
            { from: 50, to: 100 },
            { from: 100, to: 200 },
            { from: 200, to: 300 },
            { from: 300, to: 500 },
            { from: 500, to: 1000 },
            { greater: 1000 }
          ]);

          totalScale.colors([
            '#81d4fa',
            '#4fc3f7',
            '#29b6f6',
            '#039be5',
            '#0288d1',
            '#0277bd',
            '#01579b',
            '#014377',
            '#000000'
          ]);


          var colorRange = map.colorRange();
          colorRange.enabled(true).padding([0, 0, 20, 0]);
          colorRange
            .ticks()
            .enabled(true)
            .stroke('3 #ffffff')
            .position('right')
            .length(7);
          colorRange.colorLineSize(5);
          colorRange.marker().size(7);
          colorRange
            .labels()
            .fontSize(11)
            .padding(3, 0, 0, 0)
            .format(function () {
              var range = this.colorRange;
              var name;
              if (Number.isFinite(range.start + range.end)) {
                name = range.start + ' - ' + range.end;
              } else if (Number.isFinite(range.start)) {
                name = 'More than ' + range.start;
              } else {
                name = 'Less than ' + range.end;
              }
              return name;
            });

          totalSeries.colorScale(totalScale);

          //displays countries names and styles them 
          totalSeries.labels(true);
          labels = totalSeries.labels();

          // labels setting
          labels.fontColor('#000 ');
          labels.fontSize("12px");
          labels.fontWeight("bold");
          labels.offsetY(30);
          labels.offsetX(30);
        

          // publicSeries.labels(true);/works with duplicating the names of countries 

          //displays legends of series 
          // map.legend(true)
          //  map.legend().itemsSourceMode('public');


//custom labels 
//https://docs.anychart.com/Maps/Labels


custom_label = map.label();
custom_label.text('<span style="font-weight:bold;height:20px;width:20px;font-size:10px;color:black;">Private Investment </span><br><span style="font-weight:bold;height:20px;width:20px;font-size:10px;color:black;">Philanthropic Investment</span><br><span style="font-weight:bold;height:20px;width:20px;font-size:10px;color:black;">Commercial Investment </span><br><span style="font-weight:bold;height:20px;width:20px;font-size:10px;color:black;">Total Investment </span><br>');  
custom_label.position("leftbottom");
custom_label.anchor("leftbottom");
custom_label.offsetX(0);
custom_label.width(210);
custom_label.fontSize(10);
custom_label.fontColor("black")
.useHtml(true)
;
 




// //end custom labels

//disable labels that overlap each other.
map.overlapMode("no-overlap");


          // create zoom controls
          var zoomController = anychart.ui.zoom();
          zoomController.render(map);

          // set container id for the chart
          map.container('container');
          // initiate chart drawing
          map.draw();
        }
      );
    });

  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"></script>
</body>

</html>